<ion-header [translucent]="true">
  <!-- Toolbar principal -->
  @if (!isSearchActive) {
  <ion-toolbar [color]="color">
    <!-- Botón de menú o navegación -->
    @if (showMenu) {
    <ion-menu-button slot="start" color="light" auto-hide="false"></ion-menu-button>
    }

    <!-- Título centrado -->
    <ion-title class="ion-text-center">
      {{ title }}
    </ion-title>

    <!-- Versión de la app -->
    <ion-chip slot="end" color="medium" style="margin-right: 8px;">
      <ion-label>v{{ appVersion }}</ion-label>
    </ion-chip>

    <!-- Botones de acción opcionales -->
    @if (showActions) {
    <ion-buttons slot="end">
      @if (showSearch) {
      <ion-button fill="clear" (click)="onSearchClick()">
        <ion-icon name="search" slot="icon-only" color="light"></ion-icon>
      </ion-button>
      }
      @if (showSort && sortOptions.length > 0) {
      <ion-button fill="clear" (click)="openSortSelect()">
        <ion-icon name="list-outline" slot="icon-only" color="light"></ion-icon>
      </ion-button>
      <ion-select
        #sortSelect
        [value]="currentSort"
        (ionChange)="onSortChange($event)"
        interface="popover"
        placeholder="Ordenar por"
        [interfaceOptions]="sortInterfaceOptions"
        style="display: none;">
        @for (option of sortOptions; track option.value) {
        <ion-select-option [value]="option.value">{{ option.label }}</ion-select-option>
        }
      </ion-select>
      }
    </ion-buttons>
    }
  </ion-toolbar>
  }

  <!-- Toolbar de búsqueda expandido -->
  @if (isSearchActive) {
  <ion-toolbar [color]="color">
    <ion-buttons slot="start">
      <ion-button fill="clear" (click)="onSearchClick()">
        <ion-icon name="close-outline" slot="icon-only" color="light"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-searchbar
      [(ngModel)]="searchText"
      (ionInput)="onSearchInput($event)"
      (ionClear)="onSearchClear()"
      [placeholder]="searchPlaceholder"
      [debounce]="300"
      show-clear-button="focus"
      animated="true">
    </ion-searchbar>
  </ion-toolbar>
  }
</ion-header>
