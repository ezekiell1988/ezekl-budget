<!-- =====================================================
     HEADER COMPONENT - RESPONSIVE DUAL TEMPLATE
     
     Mobile: Ionic Header
     Desktop: Color-Admin Header
     ===================================================== -->

<!-- ========== VERSIÓN MÓVIL (Ionic) ========== -->
@if (isMobile()) {
  <ion-header [translucent]="translucent">
    <!-- Toolbar principal - Siempre se muestra -->
    <ion-toolbar [color]="color">
      @if (showBackButton) {
      <ion-buttons slot="start">
        <ion-back-button [defaultHref]="backButtonHref"></ion-back-button>
      </ion-buttons>
      } @else if (isAuthenticated()) {
      <ion-buttons slot="start">
        <ion-menu-button menu="main-menu"></ion-menu-button>
      </ion-buttons>
      }
      <ion-title>{{ pageTitle }}</ion-title>
      @if (isAuthenticated() && showNotifications) {
      <ion-buttons slot="end">
        <ion-button>
          <ion-icon name="notifications-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
      }
      <!-- Botones adicionales personalizados -->
      <ng-content select="[headerButtons]"></ng-content>
    </ion-toolbar>

    <!-- Contenido adicional personalizado debajo del toolbar principal -->
    <ng-content select="[headerContent]"></ng-content>
  </ion-header>
}

<!-- ========== VERSIÓN DESKTOP (Color-Admin) ========== -->
@if (isDesktop()) {
  <!-- BEGIN #header -->
  <div id="header" class="app-header" [attr.data-bs-theme]="this.appSettings.appHeaderInverse ? 'dark' : ''">
    <!-- BEGIN navbar-header -->
    <div class="navbar-header">
      @if (this.appSidebarTwo) {
      <button type="button" class="navbar-mobile-toggler" (click)="toggleAppSidebarEndMobile()">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      }
      <a href="/" class="navbar-brand"><span class="navbar-logo"></span> <b>{{ appSettings.nameCompany }}</b>&nbsp;BackOffice</a>
      @if (this.appSettings.appTopMenu && !this.appSettings.appSidebarNone) {
      <button type="button" class="navbar-mobile-toggler" (click)="toggleAppTopMenuMobile()">
        <span class="fa-stack fa-lg text-inverse">
          <i class="far fa-square fa-stack-2x"></i>
          <i class="fa fa-cog fa-stack-1x"></i>
        </span>
      </button>
      }
      @if (this.appSettings.appHeaderMegaMenu) {
      <button type="button" class="navbar-mobile-toggler" (click)="toggleAppHeaderMegaMenuMobile()">
        <span class="fa-stack fa-lg text-inverse">
          <i class="far fa-square fa-stack-2x"></i>
          <i class="fa fa-cog fa-stack-1x"></i>
        </span>
      </button>
      }
      @if (!this.appSettings.appSidebarNone) {
      <button type="button" class="navbar-mobile-toggler" (click)="toggleAppSidebarMobile()">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      }
      @if (this.appSettings.appTopMenu && this.appSettings.appSidebarNone) {
      <button type="button" class="navbar-mobile-toggler" (click)="toggleAppTopMenuMobile()">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      }
    </div>
    <!-- END navbar-header -->

    <!-- BEGIN mega-menu -->
    @if (this.appSettings.appHeaderMegaMenu) {
    <div class="collapse d-md-block me-auto"
      [ngClass]="{ 'd-block': (this.appSettings.appHeaderMegaMenu && this.appSettings.appHeaderMegaMenuMobileToggled) }">
      <div class="navbar-nav">
        <div class="navbar-item dropdown dropdown-lg">
          <a href="javascript:;" class="navbar-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
            <i class="fa fa-th-large fa-fw me-1"></i>
            <span class="d-lg-inline d-md-none">Menú</span>
            <b class="caret ms-1"></b>
          </a>
          <div class="dropdown-menu dropdown-menu-lg">
            Contenido aquí
          </div>
        </div>
        <div class="navbar-item">
          <a href="javascript:;" class="navbar-link d-flex align-items-center">
            <i class="fa fa-gem fa-fw me-1"></i>
            <span class="d-lg-inline d-md-none">Cliente</span>
          </a>
        </div>
        <div class="navbar-item dropdown">
          <a href="javascript:;" class="navbar-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
            <i class="fa fa-database fa-fw me-1"></i>
            <span class="d-lg-inline d-md-none">Nuevo</span>
            <b class="caret ms-1"></b>
          </a>
          <div class="dropdown-menu">
            <a href="javascript:;" class="dropdown-item">Acción</a>
            <a href="javascript:;" class="dropdown-item">Otra acción</a>
            <a href="javascript:;" class="dropdown-item">Algo más aquí</a>
            <div class="dropdown-divider"></div>
            <a href="javascript:;" class="dropdown-item">Enlace separado</a>
            <div class="dropdown-divider"></div>
            <a href="javascript:;" class="dropdown-item">Un enlace más separado</a>
          </div>
        </div>
      </div>
    </div>
    }
    <!-- END mega-menu -->

    <!-- BEGIN nav -->
    <div class="navbar-nav">
      <div class="navbar-item navbar-form">
        <form action="" method="POST" name="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="Buscar..." />
            <button type="submit" class="btn btn-search"><i class="fa fa-search"></i></button>
          </div>
        </form>
      </div>
      <div class="navbar-item dropdown">
        <a href="javascript:;" data-bs-toggle="dropdown" class="navbar-link dropdown-toggle icon">
          <i class="fa fa-bell"></i>
          <span class="badge">0</span>
        </a>
        <div class="dropdown-menu media-list dropdown-menu-end">
          <div class="dropdown-header">NOTIFICACIONES (0)</div>
          <div class="text-center w-300px py-3">
            No hay notificaciones
          </div>
          <div class="dropdown-footer text-center">
            <a href="javascript:;" class="text-decoration-none">Ver más</a>
          </div>
        </div>
      </div>
      @if (this.appSettings.appHeaderLanguageBar) {
      <div class="navbar-item dropdown">
        <a href="javascript:;" class="navbar-link dropdown-toggle" data-bs-toggle="dropdown">
          <span class="fi fi-es" title="es"></span>
          <span class="d-none d-sm-inline ms-1">ES</span> <b class="caret"></b>
        </a>
        <div class="dropdown-menu">
          <a href="javascript:;" class="dropdown-item"><span class="fi fi-es me-2" title="es"></span> Español</a>
          <a href="javascript:;" class="dropdown-item"><span class="fi fi-us me-2" title="us"></span> Inglés</a>
          <a href="javascript:;" class="dropdown-item"><span class="fi fi-fr me-2" title="fr"></span> Francés</a>
          <a href="javascript:;" class="dropdown-item"><span class="fi fi-de me-2" title="de"></span> Alemán</a>
          <div class="dropdown-divider"></div>
          <a href="javascript:;" class="dropdown-item text-center">más opciones</a>
        </div>
      </div>
      }
      <div class="navbar-item navbar-user dropdown">
        <a href="javascript:;" class="navbar-link dropdown-toggle d-flex align-items-center" data-bs-toggle="dropdown">
          <div class="image bg-gray-800 text-gray-600" style="background-image: url('assets/img/user.png'); background-size: cover; background-position: center;"></div>
          <span>
            <span class="d-none d-md-inline fw-bold">{{ currentUser?.nameLogin || currentUser?.emailLogin || 'Usuario' }}</span>
            <b class="caret"></b>
          </span>
        </a>
        <div class="dropdown-menu dropdown-menu-end me-1">
          <a href="javascript:;" class="dropdown-item">Editar Perfil</a>
          <a href="javascript:;" class="dropdown-item d-flex align-items-center">
            Bandeja de Entrada
            <span class="badge bg-danger rounded-pill ms-auto pb-4px">2</span>
          </a>
          <a href="javascript:;" class="dropdown-item">Calendario</a>
          <a href="javascript:;" class="dropdown-item">Configuración</a>
          <div class="dropdown-divider"></div>
          <a href="javascript:;" class="dropdown-item" (click)="logout()">Cerrar Sesión</a>
        </div>
      </div>
      @if (this.appSidebarTwo) {
      <div class="navbar-divider d-none d-md-block"></div>
      }
      @if (this.appSidebarTwo) {
      <div class="navbar-item d-none d-md-block">
        <a href="javascript:;" (click)="toggleAppSidebarEnd()" class="navbar-link icon">
          <i class="fa fa-th"></i>
        </a>
      </div>
      }
    </div>
    <!-- END nav -->
  </div>
  <!-- END #header -->
}